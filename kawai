-- Fungsi tunggu sampai karakter respawn siap
local function waitForRespawn(player)
    repeat task.wait() until player.Character and player.Character:FindFirstChild("HumanoidRootPart")
end

-- Fungsi Summit
-- Fungsi tunggu sampai karakter respawn siap
local function waitForRespawn(player)
    repeat task.wait() until player.Character and player.Character:FindFirstChild("HumanoidRootPart")
end

-- Fungsi Summit
local function doSummit(loopCount)
    running = true
    local player = game.Players.LocalPlayer

    for l = 1, loopCount do
        if not running then break end

        for i, cf in ipairs(checkpoints) do
            if not running then break end
            if player and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
                player.Character.HumanoidRootPart.CFrame = cf
            end
            task.wait(2) -- delay 2 detik antar CP
        end

        -- Reset karakter setelah checkpoint terakhir
        if player and player.Character then
            player.Character:BreakJoints()
        end

        -- tunggu sampai respawn ready
        waitForRespawn(player)
        task.wait(1) -- tambahan jeda kecil biar aman
    end
    running = false
end

        -- Reset karakter setelah checkpoint terakhir
        if player and player.Character then
            player.Character:BreakJoints()
        end

        -- tunggu sampai respawn ready
        waitForRespawn(player)
        task.wait(1) -- tambahan jeda kecil biar aman
    end
    running = false
end
